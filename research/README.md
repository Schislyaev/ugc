MongoDB vs PostgreSQL

Запуск контейнера: docker-compose up -d
Запуск скриптов: python 'название скрипта'


1. Выбор хранилища

Тесты проводились на миллионе записей

Postgres

Получение всех понравившихся фильмов ~ 0.075 секунды<br>
Количество лайков или дизлайков у определённого фильма ~ 0.045<br>
Скорость записи около 0.3 секунды, долго. Соответственно запросы выше будут актуальны.<br>
только после 0.3 секунды после записи.

MongoDB

Получение всех понравившихся фильмов ~ 0.33 секунды<br>
Количество лайков или дизлайков у определённого фильма ~ 0.36<br>
Скорость записи около 0.01 секунды, супер быстро. Данные на чтение скорее всего всегду будут актуальны<br>

Тесты показывают что постгресс лучше)<br>
Но у постгреса есть недостаток, чем больше данных тем тормознее он будет. UGC сервис подразумевает большое количество данных и рано или поздно постгресс просядет по перфомансу, в хранении таких монга будет точно лучше.

Неплохая статья https://naiveskill.com/mongodb-vs-postgresql/

Итог: Попробовал с большим количеством записей (10м), и ситуация начала выравниваться, но все еще недостаточно. Выбрали MongoDB, не по тестам, а по предназначению!

2. Дописываем или делаем новое API

Решили дописывать старое апи, так как сервис делает тот же UGC функционал, так же в прошлом спринте в апи всего одна ручка, не стоит выделять мощности под одну ручку. Если будет необходимо в будущем можно будет разделить.

3. Схема взаимодействия

Client -> API(UGC Service) -> MongoDB